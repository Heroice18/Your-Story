<!DOCTYPE html>
<!-- source code:  https://github.com/cometchat-pro-tutorials/jquery-chat-app -->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Your Story </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <link rel="stylesheet" href="CSS/Your-Story.css">


    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <!-- <script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyCOrf9zDe54yJLLbmGMQ0TbF8KWo7XacZA",
    authDomain: "your-story-d4144.firebaseapp.com",
    databaseURL: "https://your-story-d4144.firebaseio.com",
    projectId: "your-story-d4144",
    storageBucket: "your-story-d4144.appspot.com",
    messagingSenderId: "692167708500",
    appId: "1:692167708500:web:8a5942f4cf7a95e0e7c2c1"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  
var storage = firebase.storage();
var storageRef = storage.ref();
var modelRef = storageRef.child(model.json);

console.log("Checker: " + modelRef);
   
</script> -->


    <!-- Tensorflow Script-->

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
    </script>
  

</head>

<body>
<input type="file" id="jsonModel" src="./AI-Model/model.json" style="visibility: hidden;"/>
    <div class="chat-app-wrapper">
        <div class="chat">
            <div class="container">
                <div class="msg-header">
                    <div class="active">
                        <h5>
                            <a href="index.html">
                                <img src="./Images/Logo.png" class="logoYourStory">
                            </a>
                        </h5>
                    </div>
                </div>

                <div class="chat-page">
                    <div class="msg-inbox">
                        <div class="chats" id="chats">
                            <div class="msg-page" id="msg-page">
                                <div>
                                    <div id="group-message-holder">

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="msg-bottom">
                            <form class="message-form" id="message-form">
                                <div class="input-group">
                                    <input type="text" id="input-text" class="form-control message-input"
                                        placeholder="Type something" required />
                                    <div id="send-message-spinner" class="spinner">
                                        <svg width="30" height="30" viewBox="0 0 38 38"
                                            xmlns="http://www.w3.org/2000/svg" stroke="#003">
                                            <g fill="none" fill-rule="evenodd">
                                                <g transform="translate(1 1)" stroke-width="2">
                                                    <circle stroke-opacity=".5" cx="18" cy="18" r="18" />
                                                    <path d="M36 18c0-9.94-8.06-18-18-18">
                                                        <animateTransform attributeName="transform" type="rotate"
                                                            from="0 18 18" to="360 18 18" dur="1s"
                                                            repeatCount="indefinite" />
                                                    </path>
                                                </g>
                                            </g>
                                        </svg>
                                    </div>
                                    <input id="loggedInUID" type="hidden" />
                                </div>
                                <br>

                            </form>

                            <br>
                            <br>
                            <input type="text" class="titleInput" id="userTitle"
                                placeholder="Please Enter Your Title Here">
                            <input type="button" webkitdirectory directory multiple id="saveStory" class="saveStory"
                                value="Save Story" onclick="saveYourStory()" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://unpkg.com/@cometchat-pro/chat@1.8/CometChat.js"></script>


    <!-- scripts -->
    <script src="JavaScript/textCheck.js"></script>
    <script src="JavaScript/chatService.js"></script>
    <script src="JavaScript/script.js"></script>
    <script src="JavaScript/interfaceFunctions.js"></script>
    <script src="JavaScript/openCloseFiles.js"></script>
    <script>
        

//         const uploadJSONInput = document.getElementById('jsonModel');
//         console.log("HEYO: " + uploadJSONInput);
// //const uploadWeightsInput = document.getElementById('upload-weights');
// const model =  tf.loadLayersModel(tf.io.browserFiles(
//  uploadJSONInput.files[0]));



//var  model;


// async function tensorFlow(){
// $.getJSON("./AI-Model/model.json", function(json) {
//     console.log(json); // this will show the info it in firebug console
//  //   model = json;
//     localStorage.setItem('modelSaved', JSON.stringify(json));
//     var url = localStorage.getItem('modelSaved');
//     console.log("URL: " + url);
//     const newmodel = tf.loadLayersModel('localstorage');
// });
// }

// tensorFlow();
    
   // console.log("Check it: " + newmodel);



        async function tensorFlow() {



                //let data = data.json

                // let data = require('./AI-Model/model.json');
                let response = await fetch("./AI-Model/model.json")

                console.log(response);
                //localStorage.setItem('saved_model2', JSON.stringify(response))
                var data = await response.json();
                // return response.json();
               // console.log("DATA: " + JSON.stringify(data));
                localStorage.setItem('saved_model', JSON.stringify(data));
                const modelLocal = localStorage.getItem('saved_model');
                //console.log('Local model: ' + modelLocal);
                const JSONmod = JSON.parse(modelLocal);

                const model = await tf.loadLayersModel('./AI-Model/model.json');

                // const t = tf.linspace(1, 0, 256);
                // const test = model.predict(t);
                // console.log("Checking data: " + test);
        }


        tensorFlow();

        //const model = tensorFlow();

        //const model2 = tf.loadLayersModel('localstorage://saved_model');

        // var x = localStorage.getItem('saved_model');
        // console.log('LOPO: ' + x);

        function testPhy()
        {
            $.ajax({
              url: "./Phython/test.py",
              data: {param: text},
              success: function(data){
                  console.log("LK: " + data)
              },
              error: function(request, status, error) { 
              console.log("Error: " + error) 
              }
            });
        }


        testPhy();


    </script>






</body>

</html>